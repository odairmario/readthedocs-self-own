{% load i18n %}
{% load core_tags %}
{% load static %}
<!DOCTYPE html>
<html>

<head>

  <!-- meta -->
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  {% block extra_metas %}{% endblock extra_metas %}

  <link rel="icon" type="image/png" href="{% static 'images/favicon.png' %}">

  <!-- title -->
  <title>{% block title %}{% endblock %}{% block head_title %}{% endblock %} | {% block branding %}Read the Docs {% endblock %}</title>

  {% if GLOBAL_ANALYTICS_CODE %}
  <!-- Google Analytics -->
  <script>
    if ({{ DO_NOT_TRACK_ENABLED | lower }} && navigator.doNotTrack === '1') {
      console.debug('Respecting DNT with respect to analytics...');
    } else {
      // For more details on analytics at Read the Docs, please see:
      // https://docs.readthedocs.io/en/stable/advertising/advertising-details.html#analytics
      (function () {
        // New Google Site Tag (gtag.js) tagging/analytics framework
        // https://developers.google.com/gtagjs
        var script = document.createElement("script");
        script.src = "https://www.googletagmanager.com/gtag/js?id={{ GLOBAL_ANALYTICS_CODE }}";
        script.type = "text/javascript";
        script.async = true;
        document.getElementsByTagName("head")[0].appendChild(script);
      }())

      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      // Setup the RTD global analytics code and send a pageview
      gtag('config', '{{ GLOBAL_ANALYTICS_CODE }}', {
        'anonymize_ip': true,
        'cookie_expires': 0,  // Session cookie (non-persistent)
        'groups': 'rtfd'
      });

      {% if DASHBOARD_ANALYTICS_CODE %}
        // Dashboard Analytics Code
        gtag('config', '{{ DASHBOARD_ANALYTICS_CODE }}', {
          'anonymize_ip': true,
          'cookie_expires': 0,  // Session cookie (non-persistent)
          'groups': 'dashboard'
        });
        // End Dashboard Analytics Code
      {% endif %}
    }
  </script>
  <!-- End Google Analytics -->
  {% endif %}

  <!-- css -->
  <link rel="stylesheet" href="{% static 'css/core.css' %}">
  {% block extra_links %}{% endblock %}

  <!-- jquery -->
  <script src="{% static 'vendor/jquery.js' %}"></script>
  <script src="{% static 'vendor/jquery-migrate.js' %}"></script>
  <script src="{% static 'vendor/jquery-ui.js' %}"></script>
  <script >
    require('jquery');
  </script>

  <script src="{% static 'javascript/base.js' %}"></script>
  <script src="{% static 'core/js/site.js' %}"></script>
  <script>
    var site = require('core/site');
    site.handle_notification_dismiss();
  </script>

  {% block extra_scripts %}{% endblock %}

</head>

<body class="{% block body_class %}{% endblock %}">

    {% block header-wrapper %}
        {% include "core/header.html" %}
    {% endblock %}

    {% block subnav-bar %}{% endblock %}

    {% block project_editing %}{% endblock %}


    <!-- BEGIN content-->
    <div id="content">
      <div class="wrapper">

        <!-- BEGIN notify -->
        {% block notify %}
          {% if messages %}
            <ul class="notifications">
              {% for message in messages %}
                <li class="notification notification-{{ message.level }}" {% if message.pk %}data-dismiss-url="{% url 'message_mark_read' message.pk %}{% endif %}">
                  {% if message.pk %}
                  <a class="notification-action" href="{% url 'message_mark_read' message.pk %}">
                    <span class="icon close" aria-label="{% trans 'Close notification' %}"></span>
                  </a>
                  {% endif %}
                  {{ message }}
                </li>
              {% endfor %}
            </ul>
          {% endif %}
        {% endblock %}
        <!-- END notify -->

        {% block content-header %}
        {% endblock %}

        {% block content %}
        {% endblock %}

      </div>
    </div>
    <!-- END content-->

    <!-- BEGIN footer-->
    <div id="footer">
      <div class="wrapper">

        <hr>


        {% block footer-content %}



        <div class="footer-bottom">
            <p>
              <small>{% trans 'Version' %} <a href="http://docs.readthedocs.io/page/changelog.html">{% readthedocs_version %}</a></small>
            </p>
          </div>

          {% block language-select-form %}
            <div class="column-setlang">
              {% get_current_language as current_lang %}
              <form action="/i18n/setlang/" method="post" style="float: right">
                <input name="next" type="hidden" value="/" />
                {% csrf_token %}
                <select name="language">
                  {% for lang in LANGUAGES %}
                    {% if lang.0 == current_lang %}
                    <option selected="selected" value="{{ lang.0 }}">{{ lang.0|language_name_local }} [{{ lang.1 }}]</option>
                    {% else %}
                    <option value="{{ lang.0 }}">{{ lang.0|language_name_local }} [{{ lang.1 }}]</option>
                    {% endif %}
                  {% endfor %}
                </select>
                <input type="submit" value="{% trans 'Change Language' %}" name="submit">
              </form>
            </div>
          {% endblock language-select-form %}

        </div>


        {% endblock footer-content %}

      </div>
    </div>
    <!-- END footer-->

    {% block footerjs %}{% endblock %}

</body>

</html>
